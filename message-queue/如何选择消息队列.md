---
title: 如何选择消息队列
---

### 常见消息队列与特点

#### RabbitMQ

- **优点**
  - 轻量级的消息队列，容易部署和使用
  - 拥有灵活的路由配置，提供 `Exchange` 模块，根据配置的路有规则将生产者消息分发到不同的队列中，支持自己实现路有规则，扩展容易

- **缺点**
  - 对消息堆积支持不好，在它设计里面，消息队列是一个管道，<u>当大量消息积压的时候，会导致 `RabbitMQ` 性能急剧下降</u>
  - **性能相较于其它消息队列是最差的**，大概每秒可以处理几万到十几万消息，如果对性能要求非常高，那就不要选择 `RabbitMQ`
  - `RabbitMQ` 使用 `Erlang` 开发，如果你想基于它做一些扩展和二次开发什么的，建议慎重考虑


#### RocketMQ

- **优点**
  - `RocketMQ` 中文社区活跃，大多数问题可以找到中文的答案。另外使用 `Java` 语言开发，贡献者大多都是中文人，源码比较容易读懂，容易对其进行扩展或二次开发
  - <u>对响应做了很多优化</u>，大多数情况下可以做到毫秒级响应
  - 性能要比 `RabbitMQ` 高一个量级，每秒大概能处理几十万条消息
- **缺点**
  - 作为国产消息队列，在国际上还没那么流行，与周边生态系统集成和兼容程度要略逊一筹



#### Kafka

- **优点**
  - 与周边生态系统的兼容性是做好的，尤其在大数据和流计算领域，几乎所有相关的开源系统都会优先支持 `Kafka`
  - 设计上大量的使用了批量和异步的思想，使之有着超高的性能。但与 `RocketMQ` 并没有量级上的差异，大约每秒可以处理几十万条消息
- **缺点**
  - 同步收发消息延迟比较高，因为收到一条消息时，`Kafka` 并不会立即发出去，而是要攒一会，一批一起发送。如果每秒消息数量没那么多，延迟反而会比较高



#### Pulsar





### 如何选择？

选择中间件的考量维度：可靠性，性能，功能，可运维行，可拓展性，是否开源及社区活跃度

如果说，消息队列并不是你将要构建系统的主角之一，你对消息队列功能和性能都没有很高的要求，只需要一个开箱即用易于维护的产品，我建议你使用 RabbitMQ。

如果你的系统使用消息队列主要场景是处理在线业务，比如在交易系统中用消息队列传递订单，那 RocketMQ 的低延迟和金融级的稳定性是你需要的。

如果你需要处理海量的消息，像收集日志、监控信息或是前端的埋点这类数据，或是你的应用场景大量使用了大数据、流计算相关的开源产品，那 Kafka 是最适合你的消息队列
